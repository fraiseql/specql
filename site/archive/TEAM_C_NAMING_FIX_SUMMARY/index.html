<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Team C Naming Correction - Quick Fix Summary - SpecQL Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Team C Naming Correction - Quick Fix Summary";
        var mkdocs_page_input_path = "archive/TEAM_C_NAMING_FIX_SUMMARY.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> SpecQL Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../getting-started/">Getting Started</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../guides/mutation-patterns/">Mutation Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../guides/test-generation/">Test Generation</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../guides/cli/">CLI</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../reference/">Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../examples/">Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../tutorials/">Tutorials</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../best-practices/">Best Practices</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">SpecQL Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Team C Naming Correction - Quick Fix Summary</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="team-c-naming-correction-quick-fix-summary">Team C Naming Correction - Quick Fix Summary</h1>
<p><strong>Issue</strong>: Team C is using <code>input_pk_organization</code> instead of Trinity pattern naming
<strong>Impact</strong>: Breaks consistency, unclear variable semantics, non-standard JWT mapping
<strong>Priority</strong>: üö® FIX BEFORE TEAM C STARTS IMPLEMENTATION</p>
<hr />
<h2 id="the-fix-simple-search-replace">üéØ The Fix (Simple Search &amp; Replace)</h2>
<h3 id="1-auth-parameters"><strong>1. Auth Parameters</strong></h3>
<pre><code class="language-diff"># In ALL templates and generators:
- input_pk_organization UUID
+ auth_tenant_id UUID

- input_created_by UUID
+ auth_user_id UUID
</code></pre>
<h3 id="2-variable-names"><strong>2. Variable Names</strong></h3>
<pre><code class="language-diff"># For entity-specific variables:
- v_id UUID := gen_random_uuid()
+ v_{entity}_id UUID := gen_random_uuid()
  Example: v_contact_id

- v_pk_{entity} INTEGER
+ v_{entity}_pk INTEGER
  Example: v_contact_pk
</code></pre>
<h3 id="3-usage-in-code"><strong>3. Usage in Code</strong></h3>
<pre><code class="language-diff"># When calling functions or inserting data:
- input_pk_organization
+ auth_tenant_id

- input_created_by
+ auth_user_id

- v_id
+ v_{entity}_id
</code></pre>
<hr />
<h2 id="files-to-update">üìù Files to Update</h2>
<h3 id="templates-4-files"><strong>Templates</strong> (4 files)</h3>
<pre><code class="language-bash">templates/sql/app_wrapper.sql.j2
templates/sql/core_create_function.sql.j2
templates/sql/core_update_function.sql.j2
templates/sql/core_delete_function.sql.j2
</code></pre>
<p><strong>Search for</strong>: <code>input_pk_organization</code>, <code>input_created_by</code>, <code>v_id UUID :=</code>
<strong>Replace with</strong>: Trinity pattern names</p>
<h3 id="generators-2-files"><strong>Generators</strong> (2 files)</h3>
<pre><code class="language-bash">src/generators/app_wrapper_generator.py
src/generators/core_logic_generator.py
</code></pre>
<p><strong>Update</strong>: Template context to use correct parameter names</p>
<h3 id="tests-2-files"><strong>Tests</strong> (2 files)</h3>
<pre><code class="language-bash">tests/unit/generators/test_app_wrapper_generator.py
tests/unit/generators/test_core_logic_generator.py
</code></pre>
<p><strong>Update</strong>: Test assertions to expect new naming</p>
<h3 id="documentation-3-files"><strong>Documentation</strong> (3 files)</h3>
<pre><code class="language-bash">docs/implementation-plans/TEAM_C_APP_CORE_FUNCTIONS_PLAN.md
docs/teams/TEAM_C_DETAILED_PLAN.md
docs/architecture/APP_CORE_FUNCTION_PATTERN.md
</code></pre>
<p><strong>Update</strong>: Examples to show correct Trinity pattern</p>
<hr />
<h2 id="quick-validation">‚úÖ Quick Validation</h2>
<p>After making changes, run:</p>
<pre><code class="language-bash"># Should return NO results:
git grep -n &quot;input_pk_organization&quot;
git grep -n &quot;input_created_by&quot; | grep -v &quot;created_by UUID&quot; | grep &quot;input_&quot;
git grep -n &quot;v_id UUID :=&quot;

# Tests should pass:
uv run pytest tests/unit/generators/ -v
</code></pre>
<hr />
<h2 id="why-this-matters">üìñ Why This Matters</h2>
<h3 id="trinity-pattern-naming-principles"><strong>Trinity Pattern Naming Principles</strong></h3>
<table>
<thead>
<tr>
<th>Old (Wrong)</th>
<th>New (Correct)</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>input_pk_organization</code></td>
<td><code>auth_tenant_id</code></td>
<td>Clearer that it's JWT auth context, not input data</td>
</tr>
<tr>
<td><code>input_created_by</code></td>
<td><code>auth_user_id</code></td>
<td>Consistent with <code>auth_tenant_id</code>, shows it's auth context</td>
</tr>
<tr>
<td><code>v_id</code></td>
<td><code>v_contact_id</code></td>
<td>Entity-specific, avoids ambiguity in multi-entity functions</td>
</tr>
<tr>
<td><code>v_pk_contact</code></td>
<td><code>v_contact_pk</code></td>
<td>Consistent ordering: <code>v_{entity}_pk</code> pattern</td>
</tr>
</tbody>
</table>
<h3 id="benefits"><strong>Benefits</strong></h3>
<ol>
<li><strong>Clarity</strong>: <code>auth_</code> prefix immediately identifies JWT context</li>
<li><strong>Consistency</strong>: All auth params follow same pattern</li>
<li><strong>Type Safety</strong>: <code>v_contact_id</code> (UUID) vs <code>v_contact_pk</code> (INTEGER) is unambiguous</li>
<li><strong>Greppability</strong>: Easy to search for entity-specific operations</li>
<li><strong>Standards</strong>: Matches PostgreSQL RLS and JWT claim conventions</li>
</ol>
<hr />
<h2 id="implementation-steps">üöÄ Implementation Steps</h2>
<ol>
<li><strong>Read</strong>: <code>/home/lionel/code/printoptim_backend_poc/docs/teams/TEAM_C_TRINITY_PATTERN_CORRECTION.md</code></li>
<li><strong>Update Templates</strong>: Search &amp; replace in 4 SQL template files</li>
<li><strong>Update Generators</strong>: Fix context in 2 Python files</li>
<li><strong>Update Tests</strong>: Fix assertions in 2 test files</li>
<li><strong>Update Docs</strong>: Fix examples in 3 documentation files</li>
<li><strong>Verify</strong>: Run grep commands to ensure no old naming remains</li>
<li><strong>Test</strong>: Run <code>uv run pytest tests/unit/generators/ -v</code></li>
<li><strong>Commit</strong>: "fix(Team C): Correct naming to follow Trinity pattern"</li>
</ol>
<hr />
<h2 id="detailed-correction-document">üìã Detailed Correction Document</h2>
<p>For complete details, examples, and rationale, see:</p>
<p><strong>üëâ <code>/docs/teams/TEAM_C_TRINITY_PATTERN_CORRECTION.md</code></strong></p>
<p>This document contains:
- ‚úÖ Complete before/after examples
- ‚úÖ Full template diffs
- ‚úÖ Python generator updates
- ‚úÖ Test updates
- ‚úÖ Reference implementation
- ‚úÖ Verification checklist</p>
<hr />
<p><strong>Status</strong>: Ready for immediate implementation
<strong>Time Required</strong>: ~30 minutes
<strong>Priority</strong>: Must fix before Team C starts coding</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
