<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Team E: Detailed File and Code Snippet Analysis - SpecQL Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Team E: Detailed File and Code Snippet Analysis";
        var mkdocs_page_input_path = "archive/teams/TEAM_E_FILES_AND_CODE_SNIPPETS.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> SpecQL Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../getting-started/">Getting Started</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../guides/mutation-patterns/">Mutation Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../guides/test-generation/">Test Generation</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../guides/cli/">CLI</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../reference/">Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../examples/">Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../tutorials/">Tutorials</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../best-practices/">Best Practices</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">SpecQL Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Team E: Detailed File and Code Snippet Analysis</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="team-e-detailed-file-and-code-snippet-analysis">Team E: Detailed File and Code Snippet Analysis</h1>
<hr />
<h2 id="1-existing-implementation-cli-foundation">1. Existing Implementation: CLI Foundation</h2>
<h3 id="11-main-cli-entry-point">1.1 Main CLI Entry Point</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/src/cli/generate.py</code>
<strong>Size</strong>: 139 lines, 4,684 bytes
<strong>Status</strong>: FUNCTIONAL for <code>entities</code> command</p>
<p><strong>Key Code Snippets</strong>:</p>
<pre><code class="language-python"># Entry point called by: specql = &quot;src.cli.generate:main&quot;
def main():
    &quot;&quot;&quot;Entry point for specql generate command&quot;&quot;&quot;
    cli()

# Click command group
@click.group()
def cli():
    &quot;&quot;&quot;SpecQL Generator CLI&quot;&quot;&quot;
    pass

# Main command: generate entities
@cli.command()
@click.argument(&quot;entity_files&quot;, nargs=-1, type=click.Path(exists=True))
@click.option(&quot;--output-dir&quot;, &quot;-o&quot;, default=&quot;migrations&quot;, help=&quot;Output directory for migrations&quot;)
@click.option(&quot;--foundation-only&quot;, is_flag=True, help=&quot;Generate only app foundation migration&quot;)
@click.option(&quot;--include-tv&quot;, is_flag=True, help=&quot;Generate tv_ table views after entities&quot;)
def entities(entity_files, output_dir, foundation_only, include_tv):
    &quot;&quot;&quot;Generate SQL migrations from SpecQL entity files&quot;&quot;&quot;
</code></pre>
<p><strong>Integration with Other Teams</strong>:
- Uses <code>SpecQLParser</code> from Team A (src/core/specql_parser.py)
- Uses <code>SchemaOrchestrator</code> from Team B (src/generators/schema_orchestrator.py)
- Converts between EntityDefinition (Team A) and Entity (Team B) types</p>
<p><strong>Known TODO</strong>: Line 20</p>
<pre><code class="language-python">action = Action(
    name=action_def.name, steps=action_def.steps, impact=None
)  # TODO: Convert impact dict to ActionImpact
</code></pre>
<h3 id="12-cli-directory-structure">1.2 CLI Directory Structure</h3>
<pre><code>src/cli/
├── __init__.py              # Empty
├── generate.py              # 139 lines - entities command
├── validate.py              # MISSING (declared in pyproject.toml)
├── migrate.py               # MISSING (declared in pyproject.toml)
├── orchestrator.py          # MISSING (Team E internal)
├── migration_manager.py     # MISSING (Team E internal)
└── commands/                # MISSING directory
    ├── __init__.py
    ├── deduplication.py     # MISSING
    ├── split_entities.py    # MISSING
    └── validate_paths.py    # MISSING
</code></pre>
<h3 id="13-pyprojecttoml-entry-points-configuration">1.3 pyproject.toml Entry Points Configuration</h3>
<pre><code class="language-toml">[project.scripts]
specql = &quot;src.cli.generate:main&quot;
specql-validate = &quot;src.cli.validate:main&quot;  # Points to missing file
specql-migrate = &quot;src.cli.migrate:main&quot;    # Points to missing file
</code></pre>
<hr />
<h2 id="2-team-b-integration-schemaorchestrator">2. Team B Integration: SchemaOrchestrator</h2>
<h3 id="21-schemaorchestrator-class">2.1 SchemaOrchestrator Class</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/src/generators/schema_orchestrator.py</code>
<strong>Size</strong>: 203 lines
<strong>Status</strong>: FUNCTIONAL</p>
<p><strong>Key Methods Available to Team E</strong>:</p>
<pre><code class="language-python">class SchemaOrchestrator:
    &quot;&quot;&quot;Orchestrates complete schema generation: tables + types + indexes + constraints&quot;&quot;&quot;

    def __init__(self, naming_conventions: NamingConventions = None) -&gt; None:
        # Creates generators for all schema components
        self.app_gen = AppSchemaGenerator()
        self.table_gen = TableGenerator(schema_registry)
        self.type_gen = CompositeTypeGenerator()
        self.helper_gen = TrinityHelperGenerator(schema_registry)
        self.core_gen = CoreLogicGenerator(schema_registry)

    def generate_complete_schema(self, entity: Entity) -&gt; str:
        &quot;&quot;&quot;
        Generate complete schema for entity: tables + types + indexes + functions

        Returns:
            Complete SQL schema as string
        &quot;&quot;&quot;
        # Generates in order:
        # 1. App schema foundation
        # 2. Schema creation
        # 3. Common types
        # 4. Entity table (Trinity pattern)
        # 5. Input types for actions
        # 6. Indexes
        # 7. Foreign keys
        # 8. Core logic functions
        # 9. FraiseQL mutation annotations
        # 10. Trinity helper functions

    def generate_table_views(self, entities: List[EntityDefinition]) -&gt; str:
        &quot;&quot;&quot;Generate tv_ tables for all entities in dependency order&quot;&quot;&quot;

        resolver = TableViewDependencyResolver(entities)
        generation_order = resolver.get_generation_order()

        # Generates in order with FraiseQL annotations

    def generate_app_foundation_only(self) -&gt; str:
        &quot;&quot;&quot;Generate only the app schema foundation (for base migrations)&quot;&quot;&quot;
        return self.app_gen.generate_app_foundation()

    def generate_schema_summary(self, entity: Entity) -&gt; Dict:
        &quot;&quot;&quot;Generate summary of what will be created for this entity&quot;&quot;&quot;
        return {
            &quot;entity&quot;: entity.name,
            &quot;table&quot;: f&quot;{entity.schema}.tb_{entity.name.lower()}&quot;,
            &quot;types&quot;: [...],
            &quot;indexes&quot;: [...],
            &quot;constraints&quot;: [...]
        }
</code></pre>
<p><strong>Current Usage in generate.py</strong>:</p>
<pre><code class="language-python"># Line 72-103
orchestrator = SchemaOrchestrator()

# Generate app foundation
foundation_sql = orchestrator.generate_app_foundation_only()

# Generate complete schema for each entity
migration_sql = orchestrator.generate_complete_schema(entity)

# Generate table views if requested
tv_sql = orchestrator.generate_table_views(all_entity_defs)
</code></pre>
<hr />
<h2 id="3-team-a-integration-parser">3. Team A Integration: Parser</h2>
<h3 id="31-specqlparser">3.1 SpecQLParser</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/src/core/specql_parser.py</code>
<strong>Status</strong>: COMPLETE (✅ Team A Done)</p>
<p><strong>Key Method Used by Team E</strong>:</p>
<pre><code class="language-python">from src.core.specql_parser import SpecQLParser

parser = SpecQLParser()
entity_def = parser.parse(yaml_content)  # Returns EntityDefinition

# convert_entity_definition_to_entity() in generate.py converts to Entity type
def convert_entity_definition_to_entity(entity_def: EntityDefinition) -&gt; Entity:
    &quot;&quot;&quot;Convert EntityDefinition to Entity for orchestrator compatibility&quot;&quot;&quot;
    actions = []
    for action_def in entity_def.actions:
        action = Action(
            name=action_def.name, 
            steps=action_def.steps, 
            impact=None  # TODO: Convert impact dict to ActionImpact
        )
        actions.append(action)

    return Entity(
        name=entity_def.name,
        schema=entity_def.schema,
        description=entity_def.description,
        fields=entity_def.fields,
        actions=actions,
        agents=entity_def.agents,
        organization=entity_def.organization,
    )
</code></pre>
<hr />
<h2 id="4-team-d-integration-fraiseql-metadata">4. Team D Integration: FraiseQL Metadata</h2>
<h3 id="41-mutation-annotator">4.1 Mutation Annotator</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/src/generators/fraiseql/mutation_annotator.py</code>
<strong>Size</strong>: ~100 lines
<strong>Status</strong>: FUNCTIONAL</p>
<p><strong>Used by SchemaOrchestrator</strong>:</p>
<pre><code class="language-python"># From schema_orchestrator.py lines 104-116
if entity.actions:
    for action in entity.actions:
        annotator = MutationAnnotator(entity.schema, entity.name)
        annotation = annotator.generate_mutation_annotation(action)
        if annotation:
            mutation_annotations.append(annotation)

if mutation_annotations:
    parts.append(
        &quot;-- FraiseQL Mutation Annotations (Team D)\n&quot; + &quot;\n\n&quot;.join(mutation_annotations)
    )
</code></pre>
<h3 id="42-table-view-annotator">4.2 Table View Annotator</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/src/generators/fraiseql/table_view_annotator.py</code>
<strong>Size</strong>: ~200 lines
<strong>Status</strong>: FUNCTIONAL</p>
<p><strong>Used by SchemaOrchestrator for tv_ tables</strong>:</p>
<pre><code class="language-python"># From schema_orchestrator.py lines 153-161
if entity.table_views:
    annotator = TableViewAnnotator(entity)
    annotations = annotator.generate_annotations()
    if annotations:
        parts.append(
            f&quot;-- FraiseQL Annotations: {entity.schema}.tv_{entity.name.lower()}\n&quot;
            + annotations
        )
</code></pre>
<hr />
<h2 id="5-team-e-todo-whats-missing-to-implement">5. Team E TODO: What's Missing to Implement</h2>
<h3 id="51-missing-files-summary">5.1 Missing Files Summary</h3>
<table>
<thead>
<tr>
<th>Priority</th>
<th>File</th>
<th>Lines</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>HIGH</strong></td>
<td><code>src/cli/validate.py</code></td>
<td>150</td>
<td>Validation command</td>
</tr>
<tr>
<td><strong>HIGH</strong></td>
<td><code>src/cli/orchestrator.py</code></td>
<td>200</td>
<td>CLI orchestration wrapper</td>
</tr>
<tr>
<td><strong>HIGH</strong></td>
<td><code>tests/unit/cli/__init__.py</code></td>
<td>5</td>
<td>Test package</td>
</tr>
<tr>
<td><strong>HIGH</strong></td>
<td><code>tests/unit/cli/test_generate_command.py</code></td>
<td>200+</td>
<td>Generate command tests</td>
</tr>
<tr>
<td><strong>HIGH</strong></td>
<td><code>tests/unit/cli/test_cli_orchestrator.py</code></td>
<td>200+</td>
<td>Orchestrator tests</td>
</tr>
<tr>
<td><strong>MEDIUM</strong></td>
<td><code>src/cli/migrate.py</code></td>
<td>200</td>
<td>Migration execution</td>
</tr>
<tr>
<td><strong>MEDIUM</strong></td>
<td><code>src/cli/migration_manager.py</code></td>
<td>150</td>
<td>Migration state tracking</td>
</tr>
<tr>
<td><strong>MEDIUM</strong></td>
<td><code>src/generators/frontend/__init__.py</code></td>
<td>10</td>
<td>Package init</td>
</tr>
<tr>
<td><strong>MEDIUM</strong></td>
<td><code>src/generators/frontend/mutation_impacts_generator.py</code></td>
<td>150</td>
<td>JSON generator</td>
</tr>
<tr>
<td><strong>MEDIUM</strong></td>
<td><code>src/generators/frontend/typescript_types_generator.py</code></td>
<td>200</td>
<td>TypeScript types</td>
</tr>
<tr>
<td><strong>LOW</strong></td>
<td><code>src/cli/commands/__init__.py</code></td>
<td>10</td>
<td>Commands package</td>
</tr>
<tr>
<td><strong>LOW</strong></td>
<td><code>src/cli/commands/deduplication.py</code></td>
<td>100</td>
<td>Dedup commands</td>
</tr>
<tr>
<td><strong>LOW</strong></td>
<td><code>src/cli/commands/split_entities.py</code></td>
<td>120</td>
<td>Split entity commands</td>
</tr>
<tr>
<td><strong>LOW</strong></td>
<td><code>src/generators/frontend/apollo_hooks_generator.py</code></td>
<td>250</td>
<td>React hooks</td>
</tr>
<tr>
<td><strong>LOW</strong></td>
<td><code>src/generators/frontend/mutation_docs_generator.py</code></td>
<td>150</td>
<td>Markdown docs</td>
</tr>
</tbody>
</table>
<p><strong>TOTAL</strong>: ~15 files, ~2,100+ lines</p>
<h3 id="52-cli-commands-to-implement">5.2 CLI Commands to Implement</h3>
<p>Based on CLAUDE.md + TEAM_E_DATABASE_DECISIONS_PLAN.md:</p>
<p><strong>From CLAUDE.md</strong>:</p>
<pre><code class="language-bash">specql generate entities/contact.yaml                                      # PARTIAL ✅
specql generate entities/*.yaml --with-impacts --output-frontend=..  # TODO
specql validate entities/*.yaml --check-impacts                      # TODO
specql diff entities/contact.yaml                                    # TODO
specql docs entities/*.yaml --format=markdown --output=docs/       # TODO
specql validate-impacts --database-url=postgres://                  # TODO
</code></pre>
<p><strong>From TEAM_E_DATABASE_DECISIONS_PLAN.md</strong>:</p>
<pre><code class="language-bash">specql list-duplicates --entity=Location --schema=tenant            # TODO
specql recalculate-identifiers --entity=Contact --schema=crm       # TODO
specql list-split-entities                                          # TODO
specql validate-split-integrity --entity=Location --schema=tenant  # TODO
specql validate-paths --entity=Location --schema=tenant [--fix]    # TODO
</code></pre>
<hr />
<h2 id="6-dependencies-already-available">6. Dependencies Already Available</h2>
<h3 id="61-python-package-dependencies-in-pyprojecttoml">6.1 Python Package Dependencies (in pyproject.toml)</h3>
<pre><code class="language-toml">dependencies = [
    &quot;pyyaml&gt;=6.0&quot;,              # YAML parsing ✅
    &quot;jinja2&gt;=3.1.2&quot;,            # Template rendering ✅
    &quot;click&gt;=8.1.0&quot;,             # CLI framework ✅
    &quot;rich&gt;=13.0.0&quot;,             # Terminal UI/formatting ✅
    &quot;psycopg2-binary&gt;=2.9.0&quot;,   # Database driver ✅
    &quot;psycopg&gt;=3.2.12&quot;,          # Async DB driver ✅
]
</code></pre>
<p><strong>All needed for Team E work are already installed!</strong></p>
<h3 id="62-internal-modules-available-to-team-e">6.2 Internal Modules Available to Team E</h3>
<pre><code class="language-python"># Team A - Parser
from src.core.specql_parser import SpecQLParser
from src.core.ast_models import Entity, Action, EntityDefinition

# Team B - Schema Generation
from src.generators.schema_orchestrator import SchemaOrchestrator
from src.generators.table_generator import TableGenerator
from src.generators.trinity_helper_generator import TrinityHelperGenerator
from src.generators.schema.naming_conventions import NamingConventions
from src.generators.schema.schema_registry import SchemaRegistry

# Team C - Actions (if needed)
from src.generators.actions.action_compiler import ActionCompiler
from src.generators.actions.action_validator import ActionValidator

# Team D - FraiseQL
from src.generators.fraiseql.mutation_annotator import MutationAnnotator
from src.generators.fraiseql.table_view_annotator import TableViewAnnotator
</code></pre>
<hr />
<h2 id="7-current-test-examples-for-comparison">7. Current Test Examples (For Comparison)</h2>
<h3 id="71-unit-test-structure-from-team-b">7.1 Unit Test Structure (from Team B)</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/tests/unit/generators/test_schema_generator.py</code></p>
<pre><code class="language-python">import pytest
from pathlib import Path
from src.core.specql_parser import SpecQLParser
from src.generators.schema_orchestrator import SchemaOrchestrator

@pytest.fixture
def parser():
    return SpecQLParser()

@pytest.fixture
def orchestrator():
    return SchemaOrchestrator()

def test_generate_complete_schema(parser, orchestrator):
    yaml_content = &quot;&quot;&quot;
    entity: Contact
    schema: crm
    fields:
      email: text
      company: ref(Company)
    &quot;&quot;&quot;

    entity_def = parser.parse(yaml_content)
    # Convert to Entity...
    sql = orchestrator.generate_complete_schema(entity)

    assert &quot;CREATE TABLE crm.tb_contact&quot; in sql
    assert &quot;pk_contact&quot; in sql
    assert &quot;id UUID&quot; in sql
</code></pre>
<h3 id="72-integration-test-structure-from-team-b">7.2 Integration Test Structure (from Team B)</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/tests/integration/test_team_b_integration.py</code></p>
<pre><code class="language-python">import pytest
from src.core.specql_parser import SpecQLParser
from src.generators.schema_orchestrator import SchemaOrchestrator

@pytest.mark.integration
def test_schema_orchestrator_end_to_end():
    parser = SpecQLParser()
    orchestrator = SchemaOrchestrator()

    # Test with actual file
    yaml_file = Path(&quot;entities/examples/contact_lightweight.yaml&quot;)
    yaml_content = yaml_file.read_text()

    entity_def = parser.parse(yaml_content)
    # Convert to Entity...
    sql = orchestrator.generate_complete_schema(entity)

    # Verify all components are present
    assert &quot;CREATE TABLE&quot; in sql
    assert &quot;CREATE INDEX&quot; in sql
    assert &quot;CREATE OR REPLACE FUNCTION&quot; in sql
</code></pre>
<hr />
<h2 id="8-example-test-structure-for-team-e">8. Example Test Structure for Team E</h2>
<h3 id="81-test-file-test_generate_commandpy-should-be-created">8.1 Test File: test_generate_command.py (Should be created)</h3>
<pre><code class="language-python"># tests/unit/cli/test_generate_command.py
import pytest
from click.testing import CliRunner
from pathlib import Path
from src.cli.generate import cli

@pytest.fixture
def cli_runner():
    return CliRunner()

@pytest.fixture
def temp_migrations_dir(tmp_path):
    return tmp_path / &quot;migrations&quot;

def test_generate_entities_command(cli_runner, temp_migrations_dir):
    &quot;&quot;&quot;Test: specql entities entities/examples/contact.yaml&quot;&quot;&quot;
    result = cli_runner.invoke(cli, [
        'entities',
        'entities/examples/contact_lightweight.yaml',
        '--output-dir', str(temp_migrations_dir)
    ])

    assert result.exit_code == 0
    assert (temp_migrations_dir / &quot;000_app_foundation.sql&quot;).exists()
    assert (temp_migrations_dir / &quot;100_contact.sql&quot;).exists()

def test_generate_with_table_views(cli_runner, temp_migrations_dir):
    &quot;&quot;&quot;Test: specql entities ... --include-tv&quot;&quot;&quot;
    result = cli_runner.invoke(cli, [
        'entities',
        'entities/examples/contact_lightweight.yaml',
        '--output-dir', str(temp_migrations_dir),
        '--include-tv'
    ])

    assert result.exit_code == 0
    assert (temp_migrations_dir / &quot;200_table_views.sql&quot;).exists()

def test_generate_foundation_only(cli_runner, temp_migrations_dir):
    &quot;&quot;&quot;Test: specql entities --foundation-only&quot;&quot;&quot;
    result = cli_runner.invoke(cli, [
        'entities',
        '--foundation-only',
        '--output-dir', str(temp_migrations_dir)
    ])

    assert result.exit_code == 0
    assert (temp_migrations_dir / &quot;000_app_foundation.sql&quot;).exists()
</code></pre>
<hr />
<h2 id="9-example-entity-files-available-for-testing">9. Example Entity Files Available for Testing</h2>
<h3 id="91-contact-simple">9.1 Contact (Simple)</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/entities/examples/contact_lightweight.yaml</code></p>
<pre><code class="language-yaml">entity: Contact
schema: crm

fields:
  email: text
  company: ref(Company)
  status: enum(lead, qualified)

actions:
  - name: qualify_lead
    steps:
      - validate: status = 'lead'
      - update: Contact SET status = 'qualified'
</code></pre>
<h3 id="92-manufacturer-complex-with-table-views">9.2 Manufacturer (Complex with Table Views)</h3>
<p><strong>File</strong>: <code>/home/lionel/code/printoptim_backend_poc/entities/examples/manufacturer.yaml</code></p>
<pre><code class="language-yaml">entity: Manufacturer
schema: catalog

fields:
  name: text
  status: enum(active, inactive)
  parent_id: ref(Manufacturer)

table_views:
  - name: tv_Manufacturer
    columns: [id, name, status]

actions:
  - name: create_manufacturer
    steps:
      - insert: Manufacturer(name, status)
</code></pre>
<hr />
<h2 id="10-quick-implementation-checklist">10. Quick Implementation Checklist</h2>
<h3 id="phase-1-immediate-next-session">Phase 1: Immediate (Next Session)</h3>
<ul>
<li>[ ] Create <code>tests/unit/cli/</code> directory</li>
<li>[ ] Create <code>tests/unit/cli/__init__.py</code></li>
<li>[ ] Create <code>tests/unit/cli/test_generate_command.py</code> with basic tests</li>
<li>[ ] Run tests: <code>make teamE-test</code> (should have some passing)</li>
</ul>
<h3 id="phase-2-cli-foundation">Phase 2: CLI Foundation</h3>
<ul>
<li>[ ] Extend <code>generate.py</code> with <code>--with-impacts</code> flag</li>
<li>[ ] Create <code>src/cli/orchestrator.py</code> wrapper</li>
<li>[ ] Create <code>src/cli/validate.py</code> command</li>
<li>[ ] Update tests to cover new options</li>
</ul>
<h3 id="phase-3-orchestration">Phase 3: Orchestration</h3>
<ul>
<li>[ ] Create <code>src/cli/migration_manager.py</code></li>
<li>[ ] Implement migration versioning</li>
<li>[ ] Add rollback capability</li>
</ul>
<h3 id="phase-4-frontend-lower-priority">Phase 4: Frontend (Lower Priority)</h3>
<ul>
<li>[ ] Create <code>src/generators/frontend/</code> directory</li>
<li>[ ] Implement generators one by one</li>
</ul>
<h3 id="phase-5-management-commands-low-priority">Phase 5: Management Commands (Low Priority)</h3>
<ul>
<li>[ ] Create <code>src/cli/commands/</code> directory</li>
<li>[ ] Implement dedup, split entity, path validation commands</li>
</ul>
<hr />
<h2 id="summary">Summary</h2>
<p><strong>Current State</strong>:
- Team E is 5% complete (~1 file, 140 lines out of 3,200+ needed)
- Foundation is solid (Click, dependencies, examples)
- All teams A-D are complete and functional
- 100 tests show strong testing culture
- Comprehensive documentation exists</p>
<p><strong>Next Steps</strong>:
1. Create test directory and basic tests
2. Extend existing generate.py with new options
3. Build out remaining CLI commands systematically
4. Frontend code generation (lower priority)</p>
<p><strong>Effort Estimate</strong>: 2-3 weeks for complete Team E implementation following TDD methodology</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
