=== Sample File Analysis ===

## Sample Table: ../db/schema/10_tables/locale.sql
```sql
-- ============================================================================
-- Table: catalog.tb_locale
-- ============================================================================
-- [Table: LOC | IETF BCP 47 locale codes (language + region) for localization]
-- ============================================================================

CREATE TABLE catalog.tb_locale (
    -- ========================================================================
    -- Trinity Pattern: INTEGER primary key for performance
    -- ========================================================================
    pk_locale INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,

    -- ========================================================================
    -- Trinity Pattern: UUID for stable public API
    -- ========================================================================
    id UUID DEFAULT gen_random_uuid() NOT NULL,
    -- ========================================================================
    -- Business Fields
    -- ========================================================================
    code TEXT NOT NULL,
    name TEXT NOT NULL,
    flag_emoji TEXT,
    decimal_separator TEXT,
    grouping_separator TEXT,
    numeric_pattern TEXT,
    currency_symbol_position TEXT,
    currency_pattern TEXT,
    date_format TEXT,
    time_format TEXT,
    first_day_of_week TEXT,
    is_rtl BOOLEAN,
    is_default BOOLEAN,
    is_active BOOLEAN,
    sort_order INTEGER,
    -- ========================================================================
    -- Foreign Keys (Trinity Pattern: INTEGER references)
    -- ========================================================================

    fk_language INTEGER NOT NULL,

    -- ========================================================================
    -- Audit Fields (Trinity Pattern standard)
    -- ========================================================================
    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    created_by UUID,
    updated_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    updated_by UUID,
    deleted_at TIMESTAMPTZ,
    deleted_by UUID,

```

## Sample Function: ../db/schema/30_functions/create_locale.sql
```sql
-- ============================================================================
-- Mutation: create_locale
-- Entity: Locale
-- Pattern: App Wrapper + Core Logic + FraiseQL Metadata
-- ============================================================================

-- ============================================================================
-- APP WRAPPER: create_locale
-- API Entry Point (GraphQL/REST)
-- ============================================================================
CREATE OR REPLACE FUNCTION app.create_locale(
    auth_tenant_id UUID,              -- JWT context: tenant_id
    auth_user_id UUID,                -- JWT context: user_id
    input_payload JSONB               -- User input (GraphQL/REST)
) RETURNS app.mutation_result
LANGUAGE plpgsql
AS $$
DECLARE
    input_data app.type_create_locale_input;
BEGIN
    -- Convert JSONB â†’ Typed Composite
    input_data := jsonb_populate_record(
        NULL::app.type_create_locale_input,
        input_payload
    );

    -- Delegate to core business logic
    RETURN catalog.create_locale(
        auth_tenant_id,
        input_data,
        input_payload,
        auth_user_id
    );
EXCEPTION
    WHEN OTHERS THEN
        -- Handle unexpected errors
        RETURN ROW(
            '00000000-0000-0000-0000-000000000000'::UUID,
            ARRAY[]::TEXT[],
            'failed:unexpected_error',
            'An unexpected error occurred',
            NULL::JSONB,
            jsonb_build_object('error', SQLERRM, 'detail', SQLSTATE)
        )::app.mutation_result;
END;
$$;

COMMENT ON FUNCTION app.create_locale IS
'Creates a new Locale record.
Validates input and delegates to core business logic.
```
